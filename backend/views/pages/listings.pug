extends ../layout
block content
  div.page-header
    h1 Available Food
    a.btn(href='/listings/new') + Share Food
  div.filter-bar
    a.filter-btn(href='/listings') All
    each cat in categories
      a.filter-btn(href='/listings?category=' + cat.id class=selectedCategory == cat.id.toString() ? 'active' : '')= cat.name
  if listings.length === 0
    p.empty-msg No listings found for this category
  else
    div.listings-grid
      each listing in listings
        div.listing-card
          div.listing-header
            h3= listing.title
            span.badge= listing.status
          p= listing.description
          p ğŸ“¦ Quantity: #{listing.quantity}
          p ğŸ“… Expires: #{new Date(listing.expiry_date).toLocaleDateString()}
          p ğŸ‘¤ #{listing.user_name}
          p ğŸ“ #{listing.location}
          if listing.category
            span.tag= listing.category
          a.btn(href='/listings/' + listing.id) View Details